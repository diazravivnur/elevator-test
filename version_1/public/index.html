<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elevator Simulation</title>
  <style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
  }
  #building {
    position: relative;
    width: 100px;
    height: 700px; /* 70px per floor for 10 floors */
    border: 1px solid black;
  }
  #floors {
    position: absolute;
    bottom: 0;
    width: 100%;
  }
  .floor {
    width: 100px;
    height: 70px;
    border-bottom: 1px solid black;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #elevator {
    width: 50px;
    height: 50px;
    background-color: red;
    position: absolute;
    bottom: 0;
    transition: bottom 1s;
    left: 50%;
    transform: translateX(-50%);
  }
</style>
</head>
<body>
  <div id="building">
    <div id="floors"></div>
    <div id="elevator"></div>
  </div>
  <input type="number" id="floorInput" placeholder="Enter floor number">
  <button id="requestButton">Request Elevator</button>
</body>
<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();
  const elevator = document.getElementById('elevator');
  const floors = document.getElementById('floors');
  const floorInput = document.getElementById('floorInput');
  const requestButton = document.getElementById('requestButton');

  const totalFloors = 10; // Adjust the number of floors here
  for (let i = totalFloors - 1; i >= 0; i--) {
    const floorDiv = document.createElement('div');
    floorDiv.className = 'floor';
    floorDiv.id = `floor-${i}`;
    floorDiv.textContent = `Floor ${i}`;
    floors.appendChild(floorDiv);
  }

  requestButton.addEventListener('click', () => {
    const floor = parseInt(floorInput.value);
    if (isNaN(floor) || floor < 0 || floor >= totalFloors) {
      alert('Invalid floor number');
      return;
    }
    socket.emit('requestFloor', floor);
  });

  socket.on('moving', ({ from, to }) => {
    console.log(`Moving from floor ${from} to floor ${to}`);
    const newPosition = to * 70; // 70px per floor
    elevator.style.bottom = `${newPosition}px`;
  });

  socket.on('arrived', ({ floor }) => {
    console.log(`Arrived at floor ${floor}`);
  });
</script>
</html>

